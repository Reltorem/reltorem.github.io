---
layout: post
title: "IPv4 Private Addresses, NAT & IPv6"
date: 2025-11-23 12:00:00 +1000
categories: networking
---
**IPv4**

Building on a previous article (IP Addressing 2025-09-02), IPv4 is one of the most popular/common protocols in the world. The internet largely relies on IPv4 to function.

IPv4 addresses are made of 32 bits across 4 octets and supports just under *4.3 billion* unique combinations.

This is a lot of addresses, but it is estimated that over *20 billion* devices are now connected to the internet, and that number is growing every day. NAT and private IPs were first developed to address this scalability issue. IPv6 was then later developed to replace the whole IPv4 system entirely.


**NAT (Network Address Translation) & Private IP address ranges**


To address the shortage of available IP addresses, 3 blocks of addresses are reserved for private use only. They cannot be routed over the internet.
These ranges are defined in *RFC 1918*.

This way, private networks can all just use the same private IP addreses, and when they want to communicate over the internet, they share one public IP address managed by NAT.

The private ranges are:

- 10.0.0.0/8 (10.0.0.0 - 10.255.255.255) ~16.7M addresses

- 172.16.0.0/12 (172.16.0.0 - 172.31.255.255) ~1M addresses

- 192.168.0.0/16 (192.168.0.0 - 192.168.255.255) ~65K addresses

NAT translates these private addresses into the shared public IP address and routes traffic back and forth based on ports. The ports and associated addresses are stored in a table.

For example, when a device on a private network wants to connect over the internet: *user 192.168.1.64:50006* -> *google 172.216.0.46*

The router translates it into *public 123.45.67.89:50006* -> *google 172.217.0.46*

When it receives a response to the public IP along with the source port, it routes it back to the user's private address via the port they connected through.

This is known as *PAT (Port Address Translation)*


**IPv6**


Although NAT largely fixes the IPv4 address shortage problem, IPv6 is a more permanent solution and will gradually replace IPv4/NAT systems. It is not fully adopted globally yet, so all systems currently co-exist, often at the same time on a network.

Some issues with NAT are:
- Incoming connections require port forwarding which complicates communications.
- Large networks can get complex and become harder to manage and troubleshoot.
- There is still a potential IPv4 address limitation.

IPv6 addresses are 128-bit which accomodates around *340 undecillion* unique address - virtually unlimited.
This basically eliminates the need for IPv4 and NAT.

An IPv6 address might look like this:

2a03:4f00:1a2b:0000:0000:7c9e:abcd:1234

**IPv6 is hexadecimal which is base-16. This uses the digits 0 - F (0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F)**

1 hex digit represents 4 bits.
- 0001 = 1
- 1001 = 9
- 1010 - A
- 1111 - F

One 8-bit section of an IPv4 address is called an octet because it's 8 bits.

One 16-bit section of an IPv6 address is called a hextet, because it's 16 bits - 4 hex digits each represented by 4 binary bits.

There are 8 sections in an IPv6 address. 32 hex digits total. 128 bits total.

The first /64 bits (first half) define the network.

The second 64 bits (second half) define the host address.


To make it easier to parse, shorthand can be used:

- Any number of consecutive blocks of zeros can be represented by :: once in the address. There is always 8 hextets, so :: will be assumed to be the missing zeros.
- Leading zeros in a hextet can be dropped. There are always 4 digits in a hextet so missing digits will be assumed to be leading zeros.

The address: 2a03:4f00:1a2b:0000:0000:7c9e:00cd:0234
Can also be written as: 2a03:4f00:1a2b::7c9e:cd:234

This can all get complicated pretty quickly, so it's important your DNS is setup correctly and you understand how the different address protocols relate to each other.


